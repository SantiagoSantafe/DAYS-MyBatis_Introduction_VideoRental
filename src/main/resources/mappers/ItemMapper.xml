<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="edu.unisabana.dyas.sampleprj.dao.mybatis.mappers.ItemMapper">

    <select parameterType="map" id="consultarItems" resultMap="ItemResult">
      SELECT id, nombre, descripcion, fechalanzamiento, tarifaxdia, formatorenta, genero, TIPOITEM_id FROM VI_ITEMS;
    </select>

    <insert id="insertarItem" parameterType="item">
    INSERT INTO VI_ITEMS (id, nombre, descripcion, fechalanzamiento, tarifaxdia, formatorenta, genero, TIPOITEM_id)
    VALUES (#{item.id}, #{item.nombre}, #{item.descripcion}, #{item.fechaLanzamiento}, #{item.tarifaxDia}, #{item.formatoRenta}, #{item.genero}, #{item.tipo.id})
    </insert>

    <resultMap id="ItemResult" type="Item">
      <id property="id" column="id" />
      <result property="nombre" column="nombre" />
      <result property="descripcion" column="descripcion" />
      <result property="fechaLanzamiento" column="fechalanzamiento" />
      <result property="tarifaxDia" column="tarifaxdia" />
      <result property="formatoRenta" column="formatorenta" />
      <result property="genero" column="genero" />
      <collection property='tipo' ofType='TipoItem' resultMap='TipoItemResult'></collection>
    </resultMap>

    <resultMap type='TipoItem' id='TipoItemResult'>
      <result property="id" column="TIPOITEM_id" />
      <result property='descripcion' column='COLUMNAS'/>   
  </resultMap>


<select parameterType="map" id="consultarCliente" resultMap="ClienteResult" >
      	select
    c.nombre,
    c.documento,
    c.telefono,
    c.direccion,
    c.email,
    c.vetado
    FROM VI_CLIENTES as c where c.documento = #{idcli}
  </select>
  
</mapper>